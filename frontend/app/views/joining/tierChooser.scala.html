@(eventOpt: Option[model.Eventbrite.EBEvent])(implicit token: play.filters.csrf.CSRF.Token)

@import com.gu.membership.salesforce.Tier
@import configuration.Config
@import model.Eventbrite.EBEventStatus._
@import views.support.Dates._
@import helper._

@main("Join membership") {

    <section class="section-two-thirds">

        @fragments.layout.sectionHeader("Choose a membership tier")

        @fragments.tickets.ticketsFunnel(1, StepTwo = "", StepThree = "", StepFour = "")

        <section class="thirds two-thirds">

            <h2 class="section-sub-headline">Tiers</h2>

            <form action="" method="POST" id="payment-form" class="form tickets-select-form">
                @CSRF.formField
                <label for="friend">
                    <input type="radio" value="friend" id="friend" name="tier"/>
                    <h2 class="tickets-select-form__tier-name">Friend</h2>
                    <p>@Config.benefits(Tier.Friend).leadin</p>

                    <ul>
                    @for(item <- Config.benefits(Tier.Friend).list) {
                        <li>@item</li>
                    }
                    </ul>
                    <span class="tickets-select-form__price">@Config.benefits(Tier.Friend).priceText</span>
                </label>

                <label for="partner">
                    <input type="radio" value="partner" id="partner" name="tier" checked="checked"/>
                    <h2 class="tickets-select-form__tier-name">Partner</h2>
                    <p>@Config.benefits(Tier.Partner).leadin</p>

                    <ul>
                    @for(item <- Config.benefits(Tier.Partner).list) {
                        <li>@item</li>
                    }
                    </ul>
                    <span class="tickets-select-form__price">@Config.benefits(Tier.Partner).priceText</span>
                </label>

                <label for="patron">
                    <input type="radio" value="patron" id="patron" name="tier"/>
                    <h2 class="tickets-select-form__tier-name">Patron</h2>
                    <p>@Config.benefits(Tier.Patron).leadin</p>

                    <ul>
                    @for(item <- Config.benefits(Tier.Patron).list) {
                        <li>@item</li>
                    }
                    </ul>
                    <span class="tickets-select-form__price">@Config.benefits(Tier.Patron).priceText</span>
                </label>

                <input type="submit" class="submit-input action--logged-in" value="Join today"/>

            </form>
        </section>@*

            //inline-block whitespace

        *@<section class="thirds one-third">

            @for(event <- eventOpt) {

                <h2 class="section-sub-headline">You're buying tickets for:</h2>

                <div class="event-item events-list__item event-item--standalone">
                    <div class="event-item__media">
                        <a href="/event/@event.id">
                            @if(event.getStatus == SoldOut){
                                <span class="event-status event-status--sold-out">Sold Out</span>
                            }
                        <div class="delayed-image-load" data-src="@Config.eventImageUrlPath(event.id)/{width}{pixel_ratio}.png" data-alt="Please upload an event image"></div>
                        </a>
                    </div>@*

                          // Inline-block whitespace

                    *@<div class="event-item__meta">
                        <a href="/event/@event.id">
                            <h2 class="event-item__title">
                            @event.name.text
                            </h2>

                            <div class="event-item__time">@event.start.pretty</div>

                            <div class="event-item__location">
                                @if(event.venue.name){
                                    <span class="event-item__location-name">@event.venue.name</span>
                                }
                                @for(address <- event.venue.address) {
                                    @if(event.venue.name){, }
                                    <span class="event-item__location-address">@address.city, @address.postal_code</span>
                                }
                            </div>

                            @for(desc <- event.description) {
                                <div class="event-item__description">
                                    @desc.text.take(200)@if(desc.text.length > 200){&hellip;}
                                </div>
                            }

                            <div class="event-item__cta">

                                <div class="event-item__price">
                                @for(ticket <- event.ticketClassesHead) {
                                    @for(pricing <- ticket.cost) {
                                        <span class="event-item__price-amount">@pricing.formattedPrice</span>
                                        <span class="event-item__price-amout-discount">Partners/Patrons: @pricing.discountPrice</span>
                                    }
                                }
                                </div>

                                <button class="event-item__action"></button>

                            </div>
                        </a>
                    </div>

                </div>

            }

        </section>

    </section>

}
