@(pricing: model.TierPricing, currentTier: com.gu.membership.salesforce.Tier)(implicit token: play.filters.csrf.CSRF.Token)

@import com.gu.membership.salesforce.Tier.Friend
@import views.html.helper._
@import views.support.Copy._

@main("Change Tier | Friend from " + currentTier) {
    <main role="main" class="page-content l-constrained">

        @fragments.page.pageHeader("Are you sure?", Some("You will no longer receive all the great benefits"))

        @defining((pricing.benefits(currentTier), pricing.friendBenefits)) { case (currentBenefits, friendBenefits) =>
        <section class="page-section">
            <div class="page-section__content">
                <ul class="grid grid--2up-stacked grid--bordered grid--stretch">
                    <li class="grid__item">
                        <a href="@routes.TierController.change" class="action action--secondary u-margin-bottom">
                            @fragments.actionIcon("arrow-left", leftIcon=true)
                            <span class="action__label">Stay as a @currentTier</span>
                        </a>
                        <h3 class="h-stack">This is what you'll be giving up</h3>
                        @fragments.tier.tierTrail(currentBenefits, showCaption=false)
                        <div class="copy">
                            <ul>
                            @for(benefit <- friendBenefits.list) {
                                <li>@benefit.title</li>
                            }
                            </ul>
                        </div>
                    </li>
                    <li class="grid__item">
                        <form action="@routes.TierController.upgrade(Friend)" method="POST" class="u-cf">
                            @CSRF.formField
                            <button class="action u-align-right u-margin-bottom" id="qa-confirm-downgrade">@friendBenefits.cta</button>
                        </form>
                        <h3 class="h-stack">Why not stay as a Friend</h3>
                        @fragments.tier.tierTrail(friendBenefits, showCaption=false)
                        <div class="copy">
                            <ul>
                            @for(benefit <- friendBenefits.list) {
                                <li>@benefit.title</li>
                            }
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </section>
        }

    </main>

}
